[b]どこでも XOOPS コメント　GIJOE Hacked版[/b]

[b]はじめに[/b]
　「コメントの投函」フォームをメインコンテンツ下部にねじこむモジュールです。
　なおフォームは通常の textarea なので bb code を使用したい場合は「DHtmlTextArea 表示用 smarty プラグイン」などを使って、テンプレート commentany_center.html を修正して下さい。

[b]利用方法[/b]

(1) まずは、exFrame最新版を、modules ディレクトリに置いてください。インストールする必要はありません。

(2) 次に、どこでもXOOPSコメントモジュールを通常通りインストールします。

(3) 続いて「フックでXOOPSコメント」を、ブロック管理などで、目的モジュールに対して「表示」する設定にします。実際には、このブロックは表示を行いませんので、左右中央、どこに配置しても構いません。ただし、表示順だけは、出来る限り大きな数値にしておくのが良いでしょう。

　このブロックは、Smarty がコンパイルキャッシュを生成する際にテンプレートの include 文を滑り込ませるトリガーとなりますので、コメント権限とは無関係に先にゲストにアクセス権限を振っておいた方が無難です。（コメントフォームの表示・非表示は別のロジックで行います。たとえばゲストにコメントを許していないときは、コメント欄は表示されません）

この一連の作業には、blocks adminモジュールの利用がお勧めです。

(4) 以上の準備が終わりましたら、Smarty のコンパイルキャッシュ（templates_cの中身）をすべてクリアする必要があります。
　管理メニューより Cache Clear を選び、 Confirm ボタンを押して下さい。
　コメント表示対象モジュールを変更した場合にも、コンパイルキャッシュクリア操作が必要です。

(5) この状態で、目的のモジュールを表示すれば、「どこでもXOOPSコメント」の入力フォームが潜り込んだコンパイルキャッシュが、templates_c に新たに生成される、という仕組みです。

　なお、以上の動作原理から、Smarty を使用しないモジュールでは表示不可能です。

[b]どこでもトラックバックとの相性[/b]
　「フックでXOOPSコメント」ブロックを、「どこでもトラックバック」の「フックでトラックバック」ブロックと同じモジュールに配置する場合、「フックでXOOPSコメント」ブロックの方が、表示順で後ろに来るようにしてください。
　「フックでトラックバック」ブロックが後に処理されると、「フックでXOOPSコメント」ブロックの処理がキャンセルされてしまいます。
　将来的には、どちらが先に処理されても問題ないようになる予定です。
